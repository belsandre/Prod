---
layout: layouts/base.njk
---

<h1>{{ title or page.fileSlug | replace("-", " ") | replace("_", " ") | capitalize }}</h1>

{% if csvError %}
<div class="csv-error">
    <p><strong>Error parsing CSV file:</strong></p>
    <p class="error-details">{{ csvError }}</p>
</div>
{% elif csvData and csvData.length > 0 %}
<div class="csv-info">
    <p><strong>{{ csvData.length }}</strong> rows Ã— <strong>{{ csvColumns.length }}</strong> columns</p>
</div>

<div id="csv-list">
    <div class="csv-controls">
        <input class="search" placeholder="Filter rows..." />
    </div>

    <div class="table-wrapper">
        <table class="csv-table">
            <thead>
                <tr>
                    {% for column in csvColumns %}
                    <th class="sort" data-sort="col-{{ loop.index0 }}">{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody class="list">
                {% for row in csvData %}
                <tr>
                    {% for column in csvColumns %}
                    <td class="col-{{ loop.index0 }}">{{ row[column] }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>
<script>
(function() {
    var options = {
        valueNames: [{% for column in csvColumns %}'col-{{ loop.index0 }}'{% if not loop.last %}, {% endif %}{% endfor %}]
    };
    var csvList = new List('csv-list', options);
})();
</script>
{% else %}
<p>No data available</p>
{% endif %}

<style>
    .csv-controls {
        margin-bottom: 1rem;
    }

    .csv-controls .search {
        width: 100%;
        max-width: 300px;
        padding: 0.5rem 0.75rem;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 0.9rem;
        background: var(--bg-secondary);
        color: var(--text-secondary);
    }

    .csv-controls .search::placeholder {
        color: var(--text-muted);
    }

    .csv-controls .search:focus {
        outline: none;
        border-color: var(--link-color);
        box-shadow: 0 0 0 2px rgba(109, 179, 242, 0.2);
    }

    .csv-info {
        background: var(--bg-code);
        border-left: 4px solid var(--link-color);
        padding: 1rem;
        margin-bottom: 1.5rem;
        border-radius: 4px;
    }

    .csv-info p {
        margin: 0.25rem 0;
        color: var(--text-muted);
        font-size: 0.9rem;
    }

    .csv-error {
        background: var(--error-bg);
        border-left: 4px solid var(--error-border);
        padding: 1rem;
        margin-bottom: 1.5rem;
        border-radius: 4px;
    }

    .csv-error strong {
        color: var(--error-text);
    }

    .csv-error .error-details {
        color: var(--error-text);
        font-family: monospace;
        font-size: 0.85rem;
        margin-top: 0.5rem;
    }

    .table-wrapper {
        overflow-x: auto;
        margin-top: 1.5rem;
        max-width: 100%;
        -webkit-overflow-scrolling: touch;
    }

    .csv-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.9rem;
    }

    .csv-table thead {
        background: var(--bg-code);
        position: sticky;
        top: 0;
    }

    .csv-table th {
        text-align: left;
        padding: 0.75rem;
        font-weight: 600;
        color: var(--text-primary);
        border-bottom: 2px solid var(--border-color);
        white-space: nowrap;
        cursor: pointer;
        user-select: none;
    }

    .csv-table th.sort:hover {
        background: var(--bg-tertiary);
    }

    .csv-table th.sort::after {
        content: ' \2195';
        opacity: 0.3;
        font-size: 0.8em;
    }

    .csv-table th.sort.asc::after {
        content: ' \2191';
        opacity: 1;
    }

    .csv-table th.sort.desc::after {
        content: ' \2193';
        opacity: 1;
    }

    .csv-table td {
        padding: 0.75rem;
        border-bottom: 1px solid var(--border-color);
        color: var(--text-secondary);
    }

    .csv-table tbody tr:hover {
        background: var(--bg-tertiary);
    }

    @media (max-width: 768px) {
        .table-wrapper {
            margin-left: -1rem;
            margin-right: -1rem;
            max-width: calc(100vw - 30px);
        }

        .csv-table {
            font-size: 0.8rem;
        }

        .csv-table th,
        .csv-table td {
            padding: 0.5rem 0.35rem;
            font-size: 0.75rem;
        }
    }
</style>
