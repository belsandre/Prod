{% extends "base.html" %}

{% block title %}Configuration - Claude Code Job Queue{% endblock %}

{% block content %}
<div class="card">
    <h2>System Configuration</h2>

    <table class="info-table">
        <tr>
            <th>Processing Mode:</th>
            <td>
                <span class="mode-indicator {% if processing_mode == 'auto' %}mode-auto{% else %}mode-manual{% endif %}">
                    {{ processing_mode|upper }}
                </span>
            </td>
        </tr>
        <tr>
            <th>Max Concurrent Jobs:</th>
            <td>{{ max_concurrent }}</td>
        </tr>
    </table>
</div>

<div class="card">
    <h2>Processing Modes</h2>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div style="padding: 1rem; background: #fff3cd; border-radius: 4px; border: 2px solid {% if processing_mode == 'manual' %}#ffc107{% else %}#ddd{% endif %};">
            <h3 style="color: #856404; margin-bottom: 0.5rem;">Manual Mode</h3>
            <p style="margin-bottom: 0.5rem;">Jobs require explicit approval before processing.</p>
            <ul style="padding-left: 1.5rem; color: #856404;">
                <li>Review each job before processing</li>
                <li>Approve or reject individually</li>
                <li>Full control over what gets processed</li>
            </ul>
            {% if processing_mode == 'manual' %}
            <p style="margin-top: 1rem; font-weight: bold; color: #28a745;">✓ Currently Active</p>
            {% endif %}
        </div>

        <div style="padding: 1rem; background: #d4edda; border-radius: 4px; border: 2px solid {% if processing_mode == 'auto' %}#28a745{% else %}#ddd{% endif %};">
            <h3 style="color: #155724; margin-bottom: 0.5rem;">Auto Mode</h3>
            <p style="margin-bottom: 0.5rem;">Jobs are automatically approved and processed.</p>
            <ul style="padding-left: 1.5rem; color: #155724;">
                <li>Jobs go straight to processing queue</li>
                <li>No manual approval needed</li>
                <li>Faster processing, less oversight</li>
            </ul>
            {% if processing_mode == 'auto' %}
            <p style="margin-top: 1rem; font-weight: bold; color: #28a745;">✓ Currently Active</p>
            {% endif %}
        </div>
    </div>
</div>

<div class="card">
    <h2>Changing Configuration</h2>
    <p style="margin-bottom: 1rem;">To change the processing mode, set the environment variable before starting the server:</p>

    <pre># For Manual Mode (default)
export PROCESSING_MODE=manual

# For Auto Mode
export PROCESSING_MODE=auto

# Then restart the server
python3 app.py</pre>

    <p style="margin-top: 1rem;">You can also set these in a <code>.env</code> file:</p>

    <pre># .env file
PROCESSING_MODE=auto
MAX_CONCURRENT_JOBS=1
AUTH_USERNAME=your_username
AUTH_PASSWORD=your_secure_password
SECRET_KEY=your_secret_key_here</pre>
</div>

<div class="card">
    <h2>Authentication Settings</h2>
    <p><strong>Important:</strong> Change the default credentials before deploying!</p>

    <table class="info-table">
        <tr>
            <th>Username:</th>
            <td><code>AUTH_USERNAME</code> environment variable</td>
        </tr>
        <tr>
            <th>Password:</th>
            <td><code>AUTH_PASSWORD</code> environment variable</td>
        </tr>
        <tr>
            <th>Secret Key:</th>
            <td><code>SECRET_KEY</code> environment variable</td>
        </tr>
    </table>
</div>

<div class="card">
    <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}
